{# vim: set filetype=htmldjango :#}
{% extends "main/base/single_column.html" %}
{% load blocktrans from i18n %}
{% load lorem from poleno.utils %}

{% comment %}
 %
 % Context:
 %  -- form: allauth.account.forms.AddEmailForm
 %
{% endcomment %}

{% block title %}{% blocktrans %}E-mail Addresses{% endblocktrans %} | {{ block.super }}{% endblock %}

{% block content %}
  <h1>{% blocktrans %}E-mail Addresses{% endblocktrans %}</h1>
  {% if user.emailaddress_set.all %}
    <p>{% blocktrans %}The following e-mail addresses are associated with your account:{% endblocktrans %}</p>
    <form class="form-horizontal" method="post" action="{% url 'account_email' %}">
      {% csrf_token %}
      <div class="control-group">
        <div class="controls">
          {% for emailaddress in user.emailaddress_set.all %}
            <label class="{% if not emailaddress.verified %}muted{%endif%} radio">
              <input type="radio" name="email" {% if emailaddress.primary %}checked="checked"{%endif %} value="{{emailaddress.email}}">
              {{ emailaddress.email }}
              {% if emailaddress.verified %}
                <span class="text-success">{% blocktrans %}Verified{% endblocktrans %}</span>
              {% else %}
                <span class="text-error">{% blocktrans %}Unverified{% endblocktrans %}</span>
              {% endif %}
              {% if emailaddress.primary %}
                <span class="text-info">{% blocktrans %}Primary{% endblocktrans %}</span>
              {% endif %}
            </label>
          {% endfor %}
        </div>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" name="action_primary">{% blocktrans %}Make Primary{% endblocktrans %}</button>
        <button type="submit" class="btn" name="action_send">{% blocktrans %}Re-send Verification{% endblocktrans %}</button>
        <button type="submit" class="btn confirm" name="action_remove" data-confirm="{% blocktrans %}Do you really want to remove the selected e-mail address?{% endblocktrans %}">{% blocktrans %}Remove{% endblocktrans %}</button>
      </div>
    </form>
  {% else %}
    <p>{% blocktrans %}<strong>Warning:</strong> You currently do not have any e-mail address set up. You should really add an e-mail address so you can receive notifications, reset your password, etc.{% endblocktrans %}</p>
  {% endif %}

  <h3>{% blocktrans %}Add E-mail Address{% endblocktrans %}</h3>
  <p>[{% lorem 32 %}]</p>
  <form class="form-horizontal" method="post" action=".">
    {% csrf_token %}
    {% include "main/snippets/form_horizontal.html" with form=form %}
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" name="action_add">{% blocktrans %}Add E-mail{% endblocktrans %}</button>
    </div>
  </form>
{% endblock %}


{# vim: set filetype=htmldjango :#}
{% extends "main/base/single_column.html" %}
{% load blocktrans from i18n %}

{% comment %}
 %
 % Context:
 %  -- form: allauth.account.forms.ResetPasswordKeyForm
 %  -- token_fail: True | undefined
 %
{% endcomment %}

{% block title %}{% blocktrans %}Change Password{% endblocktrans %} | {{ block.super }}{% endblock %}

{% block main_col %}
  <h1>{% if token_fail %}{% blocktrans %}Bad Token{% endblocktrans %}{% else %}{% blocktrans %}Change Password{% endblocktrans %}{% endif %}</h1>
  {% if token_fail %}
    {% url 'account_reset_password' as passwd_reset_url %}
    <p>{% blocktrans %}The password reset link was invalid, possibly because it has already been used. Please request a <a href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktrans %}</p>
  {% else %}
    {% if form %}
      <form class="form-horizontal" method="post" action=".">
        {% csrf_token %}
        {% include "main/snippets/form_horizontal.html" with form=form %}
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">{% blocktrans %}Change Password{% endblocktrans %}</button>
        </div>
      </form>
    {% else %}
      <p>{% blocktrans %}Your password is now changed.{% endblocktrans %}</p>
    {% endif %}
  {% endif %}
{% endblock %}

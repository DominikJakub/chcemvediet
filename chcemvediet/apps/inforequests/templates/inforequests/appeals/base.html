{# vim: set filetype=htmldjango :#}
{% extends request.is_ajax|yesno:"main/base/ajax.html,main/base/single_column.html" %}
{% load trans from i18n %}

{% comment %}
 %
 % Context:
 %  -- wizard: chcemvediet.apps.inforequests.forms.appeals.AppealWizard
 %  -- step: chcemvediet.apps.wizards.WizardStep
 %  -- inforequest: chcemvediet.apps.inforequests.models.Inforequest
 %  -- branch: chcemvediet.apps.inforequests.models.Branch
 %  -- last_action: chcemvediet.apps.inforequests.models.Action
 %  -- text_template: string (template path)
 %  -- form_template: string (template path)
 %
{% endcomment %}

{% block title %}{% trans 'inforequests:appeals:title' %} | {{ block.super }}{% endblock %}

{% block content %}
  <form class="form-horizontal ajax ajax-operations" method="post" data-fail-target="#ajax-fail-modal"
        action="{% url 'inforequests:new_action_appeal2' inforequest.pk branch.pk %}">
    {% csrf_token %}
    {{ step.state_field }}
    {% block "header" %}
      <h1>
        {% block "header-heading" %}
          {% include "inforequests/appeals/texts/base-heading.txt" %}
        {% endblock %}
        {% block "header-step" %}
          ({{ step.step_number }}/{{ wizard.number_of_steps }})
        {% endblock %}
      </h1>
    {% endblock %}
    {% block "body" %}
      {% block "body-text" %}
        {% if text_template %}{% include text_template %}{% endif %}
      {% endblock %}
      {% block "body-form" %}
        {% if form_template %}<div>{% include form_template with form=step %}</div>{% endif %}
      {% endblock %}
    {% endblock %}
    <div class="form-actions">
      {% block "footer" %}
        {% block "footer-save" %}
          <button type="submit" class="btn" name="button" value="save">
            <i class="icon-file"></i> {% trans 'inforequests:appeals:save' %}
          </button>
        {% endblock %}
        {% block "footer-prev" %}
          {% if not step.is_first %}
            <button type="submit" class="btn" name="button" value="prev">
              <i class="icon-chevron-left"></i> {% trans 'inforequests:appeals:prev' %}
            </button>
          {% endif %}
        {% endblock %}
        {% block "footer-next" %}
          {% if not step.is_last %}
            <button type="submit" class="btn btn-primary" name="button" value="next">
              <i class="icon-chevron-right icon-white"></i> {% trans 'inforequests:appeals:next' %}
            </button>
          {% else %}
            <button type="submit" class="btn btn-primary" name="button" value="next">
              <i class="icon-chevron-right icon-white"></i> {% trans 'inforequests:appeals:finish' %}
            </button>
          {% endif %}
        {% endblock %}
        {% block "footer-cancel" %}
          <a class="btn pull-right" href="{% url 'inforequests:detail' inforequest.pk %}">
            <i class="icon-remove"></i> {% trans 'inforequests:appeals:cancel' %}
          </a>
        {% endblock %}
      {% endblock %}
    </div>
  </form>
{% endblock %}
